@page "/interview/initial"
@using HelloJobPH.Employer.Services.Interview
@inject IClientInterviewService _serviceInterview
<MudPaper Class="pa-4">
    <MudTable Dense="true" Hover="true" Bordered="true" Breakpoint="Breakpoint.Sm" Items="@candidates">
        <HeaderContent>
            <MudTh><MudText Typo="Typo.subtitle2">Name</MudText></MudTh>
            <MudTh><MudText Typo="Typo.subtitle2">Job Title</MudText></MudTh>
            <MudTh><MudText Typo="Typo.subtitle2">Status</MudText></MudTh>
            <MudTh><MudText Typo="Typo.subtitle2">Resume</MudText></MudTh>
            <MudTh><MudText Typo="Typo.subtitle2">Date Applied</MudText></MudTh>
            <MudTh><MudText Typo="Typo.subtitle2">Action</MudText></MudTh>
        </HeaderContent>

        <RowTemplate>
            <MudTd>@context.Firstname</MudTd>
            <MudTd>@context.JobTitle</MudTd>
            <MudTd>@context.Status</MudTd>
            <MudTd>@context.ResumeUrl</MudTd>
            <MudTd>@context.DateApplied.ToString("dd MMM yyyy")</MudTd>
            <MudTd>
                <MudMenu Icon="@Icons.Material.Filled.MoreVert">
                    <MudMenuItem>Accept</MudMenuItem>
                    <MudMenuItem>Reject</MudMenuItem>
                </MudMenu>
            </MudTd>
        </RowTemplate>

        <NoRecordsContent>
            <MudText Typo="Typo.body1" Align="Align.Center">No candidates found.</MudText>
        </NoRecordsContent>
    </MudTable>
</MudPaper>

@code {
    private List<InterviewListDtos> candidates = new();

    protected override async Task OnInitializedAsync()
    {
        candidates = await _serviceInterview.InitialList();
    }

    private Color GetStatusColor(string status) =>
        status switch
        {
            "Contacting" => Color.Success,
            "Awaiting Review" => Color.Info,
            _ => Color.Default
        };
}
